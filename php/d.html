<html>
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Highcharts Example</title>



<?php

$con = mysql_connect('172.16.4.134','mysql','homelink');

mysql_select_db("logdb", $con);

$sql = "SELECT day,count(id) from logstg group by day;";

$result=mysql_query($sql,$con);



while($row = mysql_fetch_array($result))

{

$day[]=$row['day'];

$count[]=intval($row['count(id)']);

}

$day = json_encode($day);




$data1 = json_encode($data1); //把获取的数据对象转换成json格式

?>


<script type="text/javascript" src="http://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>

<script src="js/highcharts.js"></script>

<script src="js/modules/exporting.js"></script>

<script type="text/javascript">

	$(function () {

	$('#container').highcharts({

	title: {

	text: 'Publish times',

	x: -20 //center

	},

	subtitle: {

	text: 'write by:zhaobin',

	x: -20

	},

	xAxis: {

	categories: <?php echo $day; ?>

	},

	yAxis: {

	title: {

	text: '次 数'

	},

	plotLines: [{

	value: 0,

	width: 1,

	color: '#808080'

	}]

	},

	tooltip: {

	valueSuffix: ' 次'

	},

	legend: {

	layout: 'vertical',

	align: 'right',

	verticalAlign: 'middle',

	borderWidth: 0

	},

	series: <?php echo $data1; ?>

	});

	});

</script>



</head>

<body>



	<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>



</body>

</html>
